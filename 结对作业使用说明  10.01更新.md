# 结对作业使用说明  10.01更新

elevator-py最后更新时间：~~2025.10.01 18:12~~ 2025.10.09 16:51

1.  查阅模拟器项目（`pip install elevator-py`~~将于~~已在`10月1日`上线）
    
    开源地址：
    
    1.  [https://z.gitee.cn/zgca/repos/zgca/Elevator](https://z.gitee.cn/zgca/repos/zgca/Elevator)
        
    2.  [https://github.com/ZGCA-Forge/Elevator](https://github.com/ZGCA-Forge/Elevator)
        
    
    提交问题反馈：
    
    1.  在Gitee创建issue（方便统计大家贡献）
        
        [https://z.gitee.cn/zgca/repos/zgca/Elevator/issues/table?issue\_type\_category=bug&issue=new: https://z.gitee.cn/zgca/repos/zgca/Elevator/issues/table?issue\_type\_category=bug&issue=new](https://z.gitee.cn/zgca/repos/zgca/Elevator/issues/table?issue_type_category=bug&issue=new)
        
    2.  在Github创建issue（可选）[Issues · ZGCA-Forge/Elevator](https://github.com/ZGCA-Forge/Elevator/issues)
        
    
    文档地址：[https://zgca-forge.github.io/Elevator](https://zgca-forge.github.io/Elevator)
    
2.  安装测试框架
    
    ```shell
    # 直接安装
    pip install elevator-py
    # 网络不通可使用使用清华源下载，指令如下：
    pip install elevator-py -i https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple
    
    # 10.6更新了0.0.5版本，请使用如下指令安装更新，可自行添加清华源后缀：
    # 10.9更新了0.0.7版本，新增了电梯移动事件
    pip install --upgrade elevator-py
    ```
    
3.  运行电梯模拟服务
    
    ```shell
    # 默认会在 http://127.0.0.1:8000 开启服务，如果无法运行，请检查8000端口是否被占用
    python -m elevator_saga.server.simulator
    ```
    
4.  运行电梯客户端
    
    ```shell
    python xxxx.py # 运行你的python文件即可
    ```
    ```python
    #!/usr/bin/env python3
    from typing import List
    
    from elevator_saga.client.base_controller import ElevatorController
    from elevator_saga.client.proxy_models import ProxyElevator, ProxyFloor, ProxyPassenger
    from elevator_saga.core.models import SimulationEvent
    
    
    class TestElevatorBusController(ElevatorController):
        def __init__(self):
            super().__init__("http://127.0.0.1:8000", True)
    
        def on_init(self, elevators: List[ProxyElevator], floors: List[ProxyFloor]) -> None:
            pass
    
        def on_event_execute_start(
            self, tick: int, events: List[SimulationEvent], elevators: List[ProxyElevator], floors: List[ProxyFloor]
        ) -> None:
            pass
    
        def on_event_execute_end(
            self, tick: int, events: List[SimulationEvent], elevators: List[ProxyElevator], floors: List[ProxyFloor]
        ) -> None:
            pass
    
        def on_passenger_call(self, passenger:ProxyPassenger, floor: ProxyFloor, direction: str) -> None:
            pass
    
        def on_elevator_idle(self, elevator: ProxyElevator) -> None:
            pass
    
        def on_elevator_stopped(self, elevator: ProxyElevator, floor: ProxyFloor) -> None:
            pass
    
        def on_passenger_board(self, elevator: ProxyElevator, passenger: ProxyPassenger) -> None:
            pass
    
        def on_passenger_alight(self, elevator: ProxyElevator, passenger: ProxyPassenger, floor: ProxyFloor) -> None:
            pass
    
        def on_elevator_passing_floor(self, elevator: ProxyElevator, floor: ProxyFloor, direction: str) -> None:
            pass
    
        def on_elevator_approaching(self, elevator: ProxyElevator, floor: ProxyFloor, direction: str) -> None:
            pass
    
    if __name__ == "__main__":
        algorithm = TestElevatorBusController()
        algorithm.start()
    
    ```
    
5.  乘客生成文件`elevator_saga/traffic`
    
    ```json
    {
      "building": {
        "floors": 6,
        "elevators": 2,
        "elevator_capacity": 8,
        "scenario": "inter_floor",
        "scale": "medium",
        "description": "楼层间流量 - 适合小建筑 (medium规模)",
        "expected_passengers": 60,
        "duration": 200
      },
      "traffic": [
        {
          "id": 1,
          "origin": 5,
          "destination": 1,
          "tick": 0
        },
        {
          "id": 2,
          "origin": 5,
          "destination": 1,
          "tick": 5
        },
        {
          "id": 3,
          "origin": 1,
          "destination": 5,
          "tick": 9
        },
        {
          "id": 4,
          "origin": 1,
          "destination": 3,
          "tick": 11
        },
        {
          "id": 5,
          "origin": 5,
          "destination": 1,
          "tick": 13
        },
        {
          "id": 6,
          "origin": 2,
          "destination": 3,
          "tick": 17
        },
        {
          "id": 7,
          "origin": 3,
          "destination": 2,
          "tick": 18
        },
        {
          "id": 8,
          "origin": 4,
          "destination": 3,
          "tick": 19
        },
        {
          "id": 9,
          "origin": 4,
          "destination": 1,
          "tick": 20
        },
        {
          "id": 10,
          "origin": 4,
          "destination": 1,
          "tick": 21
        },
        {
          "id": 11,
          "origin": 3,
          "destination": 1,
          "tick": 22
        },
        {
          "id": 12,
          "origin": 4,
          "destination": 3,
          "tick": 24
        },
        {
          "id": 13,
          "origin": 4,
          "destination": 1,
          "tick": 25
        },
        {
          "id": 14,
          "origin": 4,
          "destination": 3,
          "tick": 26
        },
        {
          "id": 15,
          "origin": 4,
          "destination": 2,
          "tick": 28
        },
        {
          "id": 16,
          "origin": 3,
          "destination": 2,
          "tick": 29
        },
        {
          "id": 17,
          "origin": 5,
          "destination": 3,
          "tick": 34
        },
        {
          "id": 18,
          "origin": 3,
          "destination": 1,
          "tick": 36
        },
        {
          "id": 19,
          "origin": 3,
          "destination": 2,
          "tick": 38
        },
        {
          "id": 20,
          "origin": 2,
          "destination": 5,
          "tick": 43
        },
        {
          "id": 21,
          "origin": 3,
          "destination": 2,
          "tick": 46
        },
        {
          "id": 22,
          "origin": 4,
          "destination": 1,
          "tick": 51
        },
        {
          "id": 23,
          "origin": 5,
          "destination": 4,
          "tick": 52
        },
        {
          "id": 24,
          "origin": 5,
          "destination": 1,
          "tick": 54
        },
        {
          "id": 25,
          "origin": 1,
          "destination": 4,
          "tick": 58
        },
        {
          "id": 26,
          "origin": 4,
          "destination": 3,
          "tick": 62
        },
        {
          "id": 27,
          "origin": 2,
          "destination": 3,
          "tick": 63
        },
        {
          "id": 28,
          "origin": 2,
          "destination": 4,
          "tick": 66
        },
        {
          "id": 29,
          "origin": 3,
          "destination": 5,
          "tick": 68
        },
        {
          "id": 30,
          "origin": 4,
          "destination": 1,
          "tick": 69
        },
        {
          "id": 31,
          "origin": 1,
          "destination": 2,
          "tick": 71
        },
        {
          "id": 32,
          "origin": 1,
          "destination": 3,
          "tick": 79
        },
        {
          "id": 33,
          "origin": 5,
          "destination": 1,
          "tick": 81
        },
        {
          "id": 34,
          "origin": 4,
          "destination": 1,
          "tick": 83
        },
        {
          "id": 35,
          "origin": 5,
          "destination": 2,
          "tick": 90
        },
        {
          "id": 36,
          "origin": 2,
          "destination": 1,
          "tick": 93
        },
        {
          "id": 37,
          "origin": 2,
          "destination": 4,
          "tick": 94
        },
        {
          "id": 38,
          "origin": 2,
          "destination": 3,
          "tick": 102
        },
        {
          "id": 39,
          "origin": 5,
          "destination": 1,
          "tick": 105
        },
        {
          "id": 40,
          "origin": 4,
          "destination": 5,
          "tick": 106
        },
        {
          "id": 41,
          "origin": 3,
          "destination": 4,
          "tick": 109
        },
        {
          "id": 42,
          "origin": 4,
          "destination": 3,
          "tick": 122
        },
        {
          "id": 43,
          "origin": 5,
          "destination": 2,
          "tick": 127
        },
        {
          "id": 44,
          "origin": 5,
          "destination": 2,
          "tick": 130
        },
        {
          "id": 45,
          "origin": 1,
          "destination": 2,
          "tick": 135
        },
        {
          "id": 46,
          "origin": 5,
          "destination": 3,
          "tick": 139
        },
        {
          "id": 47,
          "origin": 1,
          "destination": 5,
          "tick": 144
        },
        {
          "id": 48,
          "origin": 5,
          "destination": 2,
          "tick": 146
        },
        {
          "id": 49,
          "origin": 3,
          "destination": 4,
          "tick": 151
        },
        {
          "id": 50,
          "origin": 2,
          "destination": 4,
          "tick": 155
        },
        {
          "id": 51,
          "origin": 3,
          "destination": 5,
          "tick": 157
        },
        {
          "id": 52,
          "origin": 5,
          "destination": 2,
          "tick": 163
        },
        {
          "id": 53,
          "origin": 3,
          "destination": 1,
          "tick": 172
        },
        {
          "id": 54,
          "origin": 2,
          "destination": 4,
          "tick": 174
        },
        {
          "id": 55,
          "origin": 4,
          "destination": 1,
          "tick": 179
        },
        {
          "id": 56,
          "origin": 3,
          "destination": 4,
          "tick": 186
        },
        {
          "id": 57,
          "origin": 5,
          "destination": 2,
          "tick": 189
        },
        {
          "id": 58,
          "origin": 1,
          "destination": 4,
          "tick": 190
        },
        {
          "id": 59,
          "origin": 5,
          "destination": 2,
          "tick": 194
        },
        {
          "id": 60,
          "origin": 2,
          "destination": 4,
          "tick": 197
        }
      ]
    }
    ```
    
6.  Tick和Event介绍
    
    [https://zgca-forge.github.io/Elevator/events.html](https://zgca-forge.github.io/Elevator/events.html)
    
7.  类型参数和接口说明`elevator_saga/client/proxy_models.py`、`elevator_saga/core/models.py`
    
    [https://zgca-forge.github.io/Elevator/client.html](https://zgca-forge.github.io/Elevator/client.html)
    
8.  HTTP API接口说明（给非Python实现的同学提供）`elevator_saga/server/simulator.py`
    

[https://zgca-forge.github.io/Elevator/communication.html](https://zgca-forge.github.io/Elevator/communication.html)