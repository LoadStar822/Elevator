# 结对作业使用说明  10.15更新

`elevator-py`最后更新时间：~~2025.10.01 18:12~~ `2025.10.09 16:51`

1.  查阅模拟器项目（`pip install elevator-py`~~将于~~已在`10月1日`上线）
    
    开源地址：
    
    1.  [https://z.gitee.cn/zgca/repos/zgca/Elevator](https://z.gitee.cn/zgca/repos/zgca/Elevator)
        
    2.  [https://github.com/ZGCA-Forge/Elevator](https://github.com/ZGCA-Forge/Elevator)
        
    
    提交问题反馈：
    
    1.  在Gitee创建issue（方便统计大家贡献）
        
        [https://z.gitee.cn/zgca/repos/zgca/Elevator/issues/table?issue\_type\_category=bug&issue=new: https://z.gitee.cn/zgca/repos/zgca/Elevator/issues/table?issue\_type\_category=bug&issue=new](https://z.gitee.cn/zgca/repos/zgca/Elevator/issues/table?issue_type_category=bug&issue=new)
        
    2.  在Github创建issue（可选）[Issues · ZGCA-Forge/Elevator](https://github.com/ZGCA-Forge/Elevator/issues)
        
    
    文档地址：[https://zgca-forge.github.io/Elevator](https://zgca-forge.github.io/Elevator)
    
2.  安装测试框架
    
    ```shell
    # 直接安装
    pip install elevator-py
    # 网络不通可使用使用清华源下载，指令如下：
    pip install elevator-py -i https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple
    
    # 10.6更新了0.0.5版本，请使用如下指令安装更新，可自行添加清华源后缀：
    # 10.9更新了0.0.7版本，新增了电梯移动事件
    pip install --upgrade elevator-py
    ```
    
3.  运行电梯模拟服务
    
    ```shell
    # 默认会在 http://127.0.0.1:8000 开启服务，如果无法运行，请检查8000端口是否被占用
    python -m elevator_saga.server.simulator
    ```
    
4.  运行电梯客户端
    
    ```shell
    python xxxx.py # 运行你的python文件即可
    ```
    ```python
    #!/usr/bin/env python3
    from typing import List
    
    from elevator_saga.client.base_controller import ElevatorController
    from elevator_saga.client.proxy_models import ProxyElevator, ProxyFloor, ProxyPassenger
    from elevator_saga.core.models import SimulationEvent
    
    
    class TestElevatorBusController(ElevatorController):
        def __init__(self):
            super().__init__("http://127.0.0.1:8000", True)
    
        def on_init(self, elevators: List[ProxyElevator], floors: List[ProxyFloor]) -> None:
            pass
    
        def on_event_execute_start(
            self, tick: int, events: List[SimulationEvent], elevators: List[ProxyElevator], floors: List[ProxyFloor]
        ) -> None:
            pass
    
        def on_event_execute_end(
            self, tick: int, events: List[SimulationEvent], elevators: List[ProxyElevator], floors: List[ProxyFloor]
        ) -> None:
            pass
    
        def on_passenger_call(self, passenger:ProxyPassenger, floor: ProxyFloor, direction: str) -> None:
            pass
    
        def on_elevator_idle(self, elevator: ProxyElevator) -> None:
            pass
    
        def on_elevator_stopped(self, elevator: ProxyElevator, floor: ProxyFloor) -> None:
            pass
    
        def on_passenger_board(self, elevator: ProxyElevator, passenger: ProxyPassenger) -> None:
            pass
    
        def on_passenger_alight(self, elevator: ProxyElevator, passenger: ProxyPassenger, floor: ProxyFloor) -> None:
            pass
    
        def on_elevator_passing_floor(self, elevator: ProxyElevator, floor: ProxyFloor, direction: str) -> None:
            pass
    
        def on_elevator_approaching(self, elevator: ProxyElevator, floor: ProxyFloor, direction: str) -> None:
            pass
    
    if __name__ == "__main__":
        algorithm = TestElevatorBusController()
        algorithm.start()
    
    ```
    
5.  乘客生成文件`elevator_saga/traffic`
    
    ```json
    {
      "building": {
        "floors": 6,
        "elevators": 2,
        "elevator_capacity": 8,
        "scenario": "inter_floor",
        "scale": "medium",
        "description": "楼层间流量 - 适合小建筑 (medium规模)",
        "expected_passengers": 60,
        "duration": 200
      },
      "traffic": [
        {
          "id": 1,
          "origin": 5,
          "destination": 1,
          "tick": 0
        },
        {
          "id": 2,
          "origin": 5,
          "destination": 1,
          "tick": 5
        },
        {
          "id": 3,
          "origin": 1,
          "destination": 5,
          "tick": 9
        },
        {
          "id": 4,
          "origin": 1,
          "destination": 3,
          "tick": 11
        },
        {
          "id": 5,
          "origin": 5,
          "destination": 1,
          "tick": 13
        },
        {
          "id": 6,
          "origin": 2,
          "destination": 3,
          "tick": 17
        },
        {
          "id": 7,
          "origin": 3,
          "destination": 2,
          "tick": 18
        },
        {
          "id": 8,
          "origin": 4,
          "destination": 3,
          "tick": 19
        },
        {
          "id": 9,
          "origin": 4,
          "destination": 1,
          "tick": 20
        },
        {
          "id": 10,
          "origin": 4,
          "destination": 1,
          "tick": 21
        },
        {
          "id": 11,
          "origin": 3,
          "destination": 1,
          "tick": 22
        },
        {
          "id": 12,
          "origin": 4,
          "destination": 3,
          "tick": 24
        },
        {
          "id": 13,
          "origin": 4,
          "destination": 1,
          "tick": 25
        },
        {
          "id": 14,
          "origin": 4,
          "destination": 3,
          "tick": 26
        },
        {
          "id": 15,
          "origin": 4,
          "destination": 2,
          "tick": 28
        },
        {
          "id": 16,
          "origin": 3,
          "destination": 2,
          "tick": 29
        },
        {
          "id": 17,
          "origin": 5,
          "destination": 3,
          "tick": 34
        },
        {
          "id": 18,
          "origin": 3,
          "destination": 1,
          "tick": 36
        },
        {
          "id": 19,
          "origin": 3,
          "destination": 2,
          "tick": 38
        },
        {
          "id": 20,
          "origin": 2,
          "destination": 5,
          "tick": 43
        },
        {
          "id": 21,
          "origin": 3,
          "destination": 2,
          "tick": 46
        },
        {
          "id": 22,
          "origin": 4,
          "destination": 1,
          "tick": 51
        },
        {
          "id": 23,
          "origin": 5,
          "destination": 4,
          "tick": 52
        },
        {
          "id": 24,
          "origin": 5,
          "destination": 1,
          "tick": 54
        },
        {
          "id": 25,
          "origin": 1,
          "destination": 4,
          "tick": 58
        },
        {
          "id": 26,
          "origin": 4,
          "destination": 3,
          "tick": 62
        },
        {
          "id": 27,
          "origin": 2,
          "destination": 3,
          "tick": 63
        },
        {
          "id": 28,
          "origin": 2,
          "destination": 4,
          "tick": 66
        },
        {
          "id": 29,
          "origin": 3,
          "destination": 5,
          "tick": 68
        },
        {
          "id": 30,
          "origin": 4,
          "destination": 1,
          "tick": 69
        },
        {
          "id": 31,
          "origin": 1,
          "destination": 2,
          "tick": 71
        },
        {
          "id": 32,
          "origin": 1,
          "destination": 3,
          "tick": 79
        },
        {
          "id": 33,
          "origin": 5,
          "destination": 1,
          "tick": 81
        },
        {
          "id": 34,
          "origin": 4,
          "destination": 1,
          "tick": 83
        },
        {
          "id": 35,
          "origin": 5,
          "destination": 2,
          "tick": 90
        },
        {
          "id": 36,
          "origin": 2,
          "destination": 1,
          "tick": 93
        },
        {
          "id": 37,
          "origin": 2,
          "destination": 4,
          "tick": 94
        },
        {
          "id": 38,
          "origin": 2,
          "destination": 3,
          "tick": 102
        },
        {
          "id": 39,
          "origin": 5,
          "destination": 1,
          "tick": 105
        },
        {
          "id": 40,
          "origin": 4,
          "destination": 5,
          "tick": 106
        },
        {
          "id": 41,
          "origin": 3,
          "destination": 4,
          "tick": 109
        },
        {
          "id": 42,
          "origin": 4,
          "destination": 3,
          "tick": 122
        },
        {
          "id": 43,
          "origin": 5,
          "destination": 2,
          "tick": 127
        },
        {
          "id": 44,
          "origin": 5,
          "destination": 2,
          "tick": 130
        },
        {
          "id": 45,
          "origin": 1,
          "destination": 2,
          "tick": 135
        },
        {
          "id": 46,
          "origin": 5,
          "destination": 3,
          "tick": 139
        },
        {
          "id": 47,
          "origin": 1,
          "destination": 5,
          "tick": 144
        },
        {
          "id": 48,
          "origin": 5,
          "destination": 2,
          "tick": 146
        },
        {
          "id": 49,
          "origin": 3,
          "destination": 4,
          "tick": 151
        },
        {
          "id": 50,
          "origin": 2,
          "destination": 4,
          "tick": 155
        },
        {
          "id": 51,
          "origin": 3,
          "destination": 5,
          "tick": 157
        },
        {
          "id": 52,
          "origin": 5,
          "destination": 2,
          "tick": 163
        },
        {
          "id": 53,
          "origin": 3,
          "destination": 1,
          "tick": 172
        },
        {
          "id": 54,
          "origin": 2,
          "destination": 4,
          "tick": 174
        },
        {
          "id": 55,
          "origin": 4,
          "destination": 1,
          "tick": 179
        },
        {
          "id": 56,
          "origin": 3,
          "destination": 4,
          "tick": 186
        },
        {
          "id": 57,
          "origin": 5,
          "destination": 2,
          "tick": 189
        },
        {
          "id": 58,
          "origin": 1,
          "destination": 4,
          "tick": 190
        },
        {
          "id": 59,
          "origin": 5,
          "destination": 2,
          "tick": 194
        },
        {
          "id": 60,
          "origin": 2,
          "destination": 4,
          "tick": 197
        }
      ]
    }
    ```
    
6.  Tick和Event介绍
    
    [https://zgca-forge.github.io/Elevator/events.html](https://zgca-forge.github.io/Elevator/events.html)
    
7.  类型参数和接口说明`elevator_saga/client/proxy_models.py`、`elevator_saga/core/models.py`
    
    [https://zgca-forge.github.io/Elevator/client.html](https://zgca-forge.github.io/Elevator/client.html)
    
8.  HTTP API接口说明（给非Python实现的同学提供）`elevator_saga/server/simulator.py`
    

[https://zgca-forge.github.io/Elevator/communication.html](https://zgca-forge.github.io/Elevator/communication.html)

---

## 1015说明更新

#### 一阶段作业提交

第一版（算法）提交于 10月18日 23:59，请提前准备好gitee仓库（如果在github上可以同步到gitee上），团队拉入助教账号（s-gj24@bjzgca.edu.cn）用于自动化评测，如果你觉得准备好了，则可以直接设为仓库权限公开，不必拉入助教账号。

[结对作业一阶段算法提交](https://alidocs.dingtalk.com/notable/share/form/v011wvqrebowapbQnak_dv19yqvsgs3oebp3pcjys_1qX0QQ0)

**评测说明：**

| 测试用例 | 需求编号 | 配置 | 时长 (ticks) | 场景描述 | 目标 |
| --- | --- | --- | --- | --- | --- |
| **1. 18乘客同时请求** | ICSS67 | 10层，2电梯，容量10人 | 500 | tick=0，9-1层每层2人下行到0层 | 通过，**乘客全部送达即可** |
| **2. 2乘客不同楼层** | ICSS79 | 10层，2电梯，容量10人 | 400 | tick=0，9层和4层各1人下行到0层 | 测试电梯分配策略，**乘客全部送达即可** |
| **3. 22人同层不同目的地** | ICSSDJ | 10层，2电梯，容量10人 | 500 | tick=0，22人从0层上行至1-9层 | 测试早高峰上行调度，**乘客全部送达即可** |
| **4. 多段旅程** | ICST25 | 20层，3电梯，容量10人 | 800 | tick=60，15人从19层依次下行至0层 | 测试连续下行优化，**乘客全部送达即可** |
| **5. 33人随机目的地** | ICST33 | 20层，3电梯，容量10人 | 800 | tick=0，33人从0层上行至1-19层 | 测试多电梯协作，**乘客全部送达即可** |
| **6. 典型工作日** | ICSTCS | 20层，4电梯，容量10人 | 4360 | **早高峰：**多人上行（正态分布）<br>**平常时段：**随机移动上下移动<br>**晚高峰：**多下行（正态分布） | **P95平均等待时间**<br>**所有平均等待时间** |

评测的结算Tick = 最后一名乘客出现 TICK + 楼层数 \* 2 \* 2 \* 5

#### 二阶段作业提交

**评测说明：**

1.  针对6. 典型工作日，1~3号电梯的能耗记为1/次移动，4号电梯的能耗记为2/次移动
    
    总能耗 + 所有平均等待时间（`10月15日 23:59`更新\`·`elevator-py`）
    
2.  GUI能正常运行，PASS
    
3.  你的算法能够接入其他组别的GUI，记录接入个数
    
4.  你的GUI能够接入其他组别的算法，记录接入个数
    
    **仓库要求：**
    
    ```plaintext
    /repo_root
      ├── start.sh     # 一键运行入口（含环境安装 + 程序运行）
      ├── start_no_gui.sh     # 无头模式
      ├── 其他代码
      └── README.md        # 简要说明设计概要和运行依赖
    ```
    
    **QA：**
    
    **Q1 如何实现不同的GUI匹配不同的算法？**
    
    **A 模拟器启动，接受两个controller调用，一个为你的仓库，一个为另一个同学的仓库，当仅使用你的GUI时，只向你发送事件（电梯移动，乘客上下等信息），不响应你的动作（go\_to\_floor），而另一个同学的仓库正常调用，则实现组间匹配。**
    
    **Q2 如何保证我的算法是可以对接的呢？**
    
    **A 寻求另一个组合作，尝试进行代码迁移。**
    
5.  提交结对编程个人博客
    

提交链接：[个人博客作业 2：结对编程项目总结 - 工作项 - SE-course - 北京中关村学院](https://z.gitee.cn/zgca/repos/zgca/se-course/issues/table?issue=ICVHZU)

开始时间：22号以后

#### 作业打分